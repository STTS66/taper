<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Tapper Premium</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Auth Overlay -->
    <div id="auth-overlay" class="overlay">
        <div class="auth-box glass">
            <h2>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <p id="auth-error" class="error-msg"></p>
            <input type="text" id="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" autocomplete="off">
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
            <div class="auth-buttons">
                <button id="btn-play" class="btn primary">–ò–≥—Ä–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Main Game UI -->
    <div id="game-ui" class="hidden">
        <header class="glass">
            <div class="user-info" style="display: flex; align-items: center; gap: 10px;">
                <img id="header-avatar" src="https://via.placeholder.com/40"
                    style="width: 30px; height: 30px; border-radius: 50%; object-fit: cover; display: none;">
                <span id="player-name">Player</span>
            </div>
            <div class="balance-display">
                <span class="currency">ü™ô</span>
                <span id="balance">0</span>
            </div>
            <div class="power-display">
                –°–∏–ª–∞ –∫–ª–∏–∫–∞: <span id="click-power">1</span>
                <div style="font-size: 0.8em; color: var(--accent); margin-top: 5px;">
                    –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è: <span id="rebirth-count">0</span>
                </div>
            </div>
        </header>

        <!-- Tap & Shop Tab -->
        <main id="tab-game" class="tab-content active">
            <div id="tap-target" class="coin">
                <div class="coin-inner"></div>
            </div>
            <!-- Floating text container -->
            <div id="floating-texts"></div>

            <aside class="shop glass">
                <h3>–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–æ–∫–∞—á–∫–∏</h3>
                <div class="upgrade-item" id="upgrade-power">
                    <div class="upgrade-info">
                        <h4>+1 –∫ –°–∏–ª–µ –∫–ª–∏–∫–∞</h4>
                        <p>–¶–µ–Ω–∞: <span id="upgrade-price">10</span> ü™ô</p>
                    </div>
                    <button class="btn buy-btn" id="btn-buy-upgrade">–ö—É–ø–∏—Ç—å</button>
                </div>

                <div class="upgrade-item" id="upgrade-rebirth"
                    style="border-top: 1px solid rgba(255, 255, 255, 0.1); margin-top: 10px; padding-top: 10px;">
                    <div class="upgrade-info">
                        <h4 style="color: #ffd700;">üåü –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h4>
                        <p>–¶–µ–Ω–∞: 10,000 ü™ô –∑–∞ 1 —à—Ç.</p>
                        <p style="font-size: 0.8em; color: var(--accent);">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x<span
                                id="rebirth-multiplier">1</span></p>
                    </div>
                    <button class="btn buy-btn" id="btn-buy-rebirth"
                        style="background: linear-gradient(135deg, #ffd700, #ff8c00);">–ú–∞–∫—Å–∏–º—É–º</button>
                </div>
            </aside>
        </main>

        <!-- Rewards Tab -->
        <main id="tab-rewards" class="tab-content hidden glass">
            <h2>üéÅ –ù–∞–≥—Ä–∞–¥—ã</h2>
            <div id="rewards-list" class="rewards-container">
            </div>
        </main>

        <!-- Leaderboard (Top) Tab -->
        <main id="tab-top" class="tab-content hidden glass">
            <h2>üèÜ –¢–æ–ø –ò–≥—Ä–æ–∫–æ–≤</h2>
            <div id="leaderboard-list" class="rewards-container"
                style="max-height: 50vh; overflow-y: auto; margin-top: 20px;">
                <!-- Filled via JS -->
            </div>
        </main>

        <!-- Admin Tab -->
        <main id="tab-admin" class="tab-content hidden glass" style="max-height: 80vh; overflow-y: auto;">
            <h2>üõ°Ô∏è –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h2>
            <!-- Admin Quests Form -->
            <div
                style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; text-align: left; margin-top: 20px;">
                <h3 style="margin-bottom: 10px; color: var(--accent);">–î–æ–±–∞–≤–∏—Ç—å –∫–≤–µ—Å—Ç</h3>
                <input type="text" id="admin-quest-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä. üíé –ë–æ–≥–∞—á)"
                    style="margin-bottom: 10px;">
                <input type="text" id="admin-quest-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–∞–ø—Ä. –ù–∞–∫–æ–ø–∏—Ç—å 5000 ü™ô)"
                    style="margin-bottom: 10px;">
                <select id="admin-quest-type"
                    style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(0,0,0,0.5); color: white; border: 1px solid var(--glass-border); margin-bottom: 10px; outline: none;">
                    <option value="balance">–£—Å–ª–æ–≤–∏–µ: –ú–æ–Ω–µ—Ç—ã (–ë–∞–ª–∞–Ω—Å)</option>
                    <option value="click_power">–£—Å–ª–æ–≤–∏–µ: –°–∏–ª–∞ –∫–ª–∏–∫–∞</option>
                </select>
                <input type="number" id="admin-quest-goal" placeholder="–°–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –Ω–∞–∫–æ–ø–∏—Ç—å?"
                    style="margin-bottom: 10px;">
                <input type="number" id="admin-quest-reward" placeholder="–ù–∞–≥—Ä–∞–¥–∞ (–º–æ–Ω–µ—Ç)" style="margin-bottom: 15px;">
                <p id="admin-quest-msg" style="font-size: 0.9rem; margin-bottom: 10px;"></p>
                <button id="btn-add-quest" class="btn primary" style="width: 100%;">‚ûï –°–æ–∑–¥–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            </div>

            <!-- Admin Stats -->
            <div style="text-align: center; margin-top: 30px;">
                <p style="font-size: 1.2rem; color: var(--text-muted); margin-bottom: 10px;">–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤
                    –∏–≥—Ä–µ:</p>
                <div style="font-size: 3rem; font-weight: bold; color: var(--accent); text-shadow: 0 0 15px rgba(0, 242, 254, 0.5);"
                    id="admin-user-count">...</div>
                <p style="margin-top: 5px;">–∏–≥—Ä–æ–∫–æ–≤</p>
                <button id="btn-refresh-admin" class="btn secondary" style="margin-top: 15px;">üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                    —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
            </div>

            <!-- Admin Quests List -->
            <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-top: 20px;">
                <h3 style="color: var(--accent); margin-bottom: 15px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞–º–∏</h3>
                <div id="admin-quests-list" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Filled by JS -->
                </div>
            </div>

            <!-- Admin Users List -->
            <div
                style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-top: 20px; text-align: left;">
                <h3 style="color: var(--accent); margin-bottom: 15px;">–°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤</h3>
                <div id="admin-users-list"
                    style="display: flex; flex-direction: column; gap: 10px; max-height: 300px; overflow-y: auto;">
                    <!-- Filled by JS -->
                </div>
            </div>
        </main>
        </main>

        <!-- Chat Tab -->
        <main id="tab-chat" class="tab-content hidden glass"
            style="display: flex; flex-direction: column; height: 100%; overflow: hidden;">

            <!-- Chat List View -->
            <div id="chat-list-view" style="flex: 1; overflow-y: auto;">
                <h2 style="margin-bottom: 20px;">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</h2>
                <div id="chat-contacts-list" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Filled by JS -->
                </div>
            </div>

            <!-- Chat Dialog View (Hidden initially) -->
            <div id="chat-dialog-view" class="hidden"
                style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
                <!-- Dialog Header -->
                <div
                    style="display: flex; align-items: center; gap: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 15px;">
                    <button id="btn-back-to-chats" class="btn secondary"
                        style="padding: 5px 15px; font-size: 1rem;">üîô</button>
                    <img id="chat-current-avatar" src="https://via.placeholder.com/40"
                        style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                    <h3 id="chat-current-username" style="flex: 1; margin: 0;">Username</h3>
                    <button id="btn-chat-block-user" class="btn"
                        style="background: #ff4d4d; color: white; padding: 5px 10px; font-size: 0.8rem;">üö´ –í
                        –ß–°</button>
                </div>

                <!-- Messages Area -->
                <div id="chat-messages-area"
                    style="flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; padding-right: 5px; margin-bottom: 15px;">
                    <!-- Filled by JS -->
                </div>

                <!-- Input Area -->
                <div style="display: flex; gap: 10px; align-items: center; margin-top: auto;">
                    <label for="chat-image-upload" class="btn secondary"
                        style="padding: 10px 15px; cursor: pointer; flex-shrink: 0; margin: 0; display: flex; justify-content: center; align-items: center;">
                        üì∏
                    </label>
                    <input type="file" id="chat-image-upload" accept="image/*" style="display: none;">

                    <input type="text" id="chat-input-text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        style="flex: 1; margin: 0;">

                    <button id="btn-chat-send" class="btn primary"
                        style="padding: 10px 20px; flex-shrink: 0;">üì§</button>
                </div>
            </div>

        </main>

        <!-- Profile Tab -->
        <main id="tab-profile" class="tab-content hidden glass">
            <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
            <div
                style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin-top: 20px; text-align: left;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <label for="profile-avatar-upload" style="cursor: pointer; display: inline-block;">
                        <img id="profile-avatar-preview" src="https://via.placeholder.com/100"
                            style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid var(--accent); transition: 0.3s; background: rgba(0,0,0,0.5);"
                            onmouseover="this.style.opacity=0.7" onmouseout="this.style.opacity=1">
                        <div style="font-size: 0.8rem; color: var(--accent); margin-top: 5px;">üì∑ –í—ã–±—Ä–∞—Ç—å –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
                        </div>
                    </label>
                    <input type="file" id="profile-avatar-upload" accept="image/*" style="display: none;">
                </div>

                <h3 style="color: var(--accent); margin-bottom: 10px;">–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                <input type="text" id="profile-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" style="margin-bottom: 15px;">
                <button id="btn-save-profile" class="btn primary" style="width: 100%; margin-bottom: 20px;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    –ø—Ä–æ—Ñ–∏–ª—å</button>

                <hr style="border-color: rgba(255,255,255,0.1); margin-bottom: 20px;">

                <h3 style="color: #ff4d4d; margin-bottom: 10px;">–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
                <input type="password" id="profile-old-pass" placeholder="–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å" style="margin-bottom: 10px;">
                <input type="password" id="profile-new-pass" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" style="margin-bottom: 15px;">
                <button id="btn-change-password" class="btn" style="width: 100%; background: #ff4d4d; color: white;">üîê
                    –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>

                <p id="profile-msg" style="text-align: center; margin-top: 15px; font-size: 0.9em;"></p>
            </div>
            <button id="btn-logout" class="btn"
                style="width: 100%; margin-top: 20px; background: rgba(255,255,255,0.1); color: white;">üö™ –í—ã–π—Ç–∏ –∏–∑
                –∞–∫–∫–∞—É–Ω—Ç–∞</button>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav glass">
            <button class="nav-btn active" data-tab="tab-game">
                <span class="icon">üïπÔ∏è</span>
                <span class="label">–ò–≥—Ä–∞</span>
            </button>
            <button class="nav-btn" data-tab="tab-rewards">
                <span class="icon">üéÅ</span>
                <span class="label">–ù–∞–≥—Ä–∞–¥—ã</span>
            </button>
            <button class="nav-btn" data-tab="tab-top">
                <span class="icon">üèÜ</span>
                <span class="label">–¢–æ–ø</span>
            </button>
            <button class="nav-btn" data-tab="tab-chat">
                <span class="icon">üí¨</span>
                <span class="label">–ß–∞—Ç</span>
            </button>
            <button class="nav-btn" data-tab="tab-profile">
                <span class="icon">üë§</span>
                <span class="label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
            <button class="nav-btn hidden" id="nav-btn-admin" data-tab="tab-admin">
                <span class="icon">üõ°Ô∏è</span>
                <span class="label">–ê–¥–º–∏–Ω–∫–∞</span>
            </button>
        </nav>
    </div>

    <!-- Admin Edit User Modal -->
    <div id="admin-edit-modal" class="hidden"
        style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; display: flex; justify-content: center; align-items: center; padding: 20px;">
        <div class="glass"
            style="width: 100%; max-width: 400px; padding: 25px; border-radius: 15px; text-align: left; max-height: 90vh; overflow-y: auto;">
            <h3 style="color: var(--accent); margin-bottom: 20px; text-align: center;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ò–≥—Ä–æ–∫–∞</h3>
            <input type="hidden" id="admin-edit-id">

            <label
                style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 5px; display: block;">–ù–∏–∫–Ω–µ–π–º</label>
            <input type="text" id="admin-edit-username" style="margin-bottom: 15px;">

            <label style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 5px; display: block;">–ë–∞–ª–∞–Ω—Å
                (–ú–æ–Ω–µ—Ç—ã)</label>
            <input type="number" id="admin-edit-balance" style="margin-bottom: 15px;">

            <label style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 5px; display: block;">–°–∏–ª–∞
                –∫–ª–∏–∫–∞</label>
            <input type="number" id="admin-edit-power" style="margin-bottom: 15px;">

            <label
                style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 5px; display: block;">–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è</label>
            <input type="number" id="admin-edit-rebirths" style="margin-bottom: 15px;">

            <label style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 5px; display: block;">–†–æ–ª—å</label>
            <select id="admin-edit-role"
                style="width: 100%; padding: 15px; border-radius: 10px; background: rgba(0,0,0,0.5); color: white; border: 1px solid var(--glass-border); margin-bottom: 15px; outline: none;">
                <option value="user">–ò–≥—Ä–æ–∫ (user)</option>
                <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)</option>
            </select>

            <label style="color: #ff4d4d; font-size: 0.9em; margin-bottom: 5px; display: block;">–ù–æ–≤—ã–π –ü–∞—Ä–æ–ª—å (–ø—É—Å—Ç–æ =
                –Ω–µ –º–µ–Ω—è—Ç—å)</label>
            <input type="text" id="admin-edit-password" placeholder="–í–ø–∏—à–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å..."
                style="margin-bottom: 20px;">

            <div style="display: flex; gap: 10px;">
                <button id="btn-admin-edit-save" class="btn primary" style="flex: 1; padding: 10px;">üíæ
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="document.getElementById('admin-edit-modal').classList.add('hidden')" class="btn"
                    style="flex: 1; padding: 10px; background: rgba(255,255,255,0.1); color: white;">‚úñ –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>